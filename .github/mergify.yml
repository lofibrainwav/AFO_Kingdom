# Mergify configuration for AFO Kingdom
# çœå–„ç¾å­æ°¸ ì² í•™: å–„ (ë³´ì•ˆ), ç¾ (ìš°ì•„í•¨), å­ (íš¨ìœ¨), æ°¸ (ì•ˆì •)

pull_request_rules:
  # 1. Dependabot ë³´ì•ˆ íŒ¨ì¹˜ â†’ ì¦‰ì‹œ ìë™ ë³‘í•© (ìµœìš°ì„ )
  - name: "[ë³´ì•ˆ] Dependabot security update â†’ ì¦‰ì‹œ ìë™ ë³‘í•©"
    conditions:
      - author=dependabot[bot]
      - "title~=^\\[Security\\]"
      - check-success~=test
    actions:
      merge:
        method: squash
        commit_message_template: "fix(security): {{ title }} (#{{ number }})"
      comment:
        message: "ğŸ”’ ê¸´ê¸‰ ë³´ì•ˆ ì·¨ì•½ì  ìë™ íŒ¨ì¹˜ ì™„ë£Œ! ì™•êµ­ ì•ˆì „ 100% í™•ë³´!"

  # 2. Dependabot íŒ¨ì¹˜/ë§ˆì´ë„ˆ â†’ CI í†µê³¼ í›„ ìë™ ë³‘í•©
  - name: "[ì˜ì¡´ì„±] Dependabot íŒ¨ì¹˜/ë§ˆì´ë„ˆ â†’ ìë™ ë³‘í•©"
    conditions:
      - author=dependabot[bot]
      - "-title~=^\\[Major\\]"
      - label=dependencies
      - check-success~=test
      - base=main
      - -label=hold
    actions:
      merge:
        method: squash
        commit_message_template: "chore(deps): {{ title }} (#{{ number }})"
      comment:
        message: "ğŸ“¦ ì˜ì¡´ì„± ìë™ ì—…ë°ì´íŠ¸ ì™„ë£Œ! ì™•êµ­ ìµœì‹  ìƒíƒœ ìœ ì§€!"

  # 3. CI ì‹¤íŒ¨ ì‹œ ìë™ ì·¨ì†Œ + ì•Œë¦¼
  - name: "[ì•ˆì „] CI ì‹¤íŒ¨ â†’ PR ìë™ ì·¨ì†Œ"
    conditions:
      - check-failure~=test
    actions:
      comment:
        message: "âŒ CIì—ì„œ ë¬¸ì œê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. í™•ì¸ í›„ ì¬ì‹¤í–‰ ë¶€íƒë“œë¦½ë‹ˆë‹¤."

  # 4. Draft/WIP PR â†’ ìë™ìœ¼ë¡œ hold ë¼ë²¨ ë¶€ì—¬
  - name: "[ê´€ë¦¬] Draft â†’ hold ë¼ë²¨ ìë™ ë¶€ì—¬"
    conditions:
      - draft
      - -label=hold
    actions:
      label:
        add: ["hold"]

  # 5. ë©”ì´ì € ì—…ë°ì´íŠ¸ â†’ ë¦¬ë·° ìš”ì²­ + ë¼ë²¨
  - name: "[ì£¼ì˜] ë©”ì´ì € ì—…ë°ì´íŠ¸ â†’ ë¦¬ë·° í•„ìš”"
    conditions:
      - author=dependabot[bot]
      - "title~=^\\[Major\\]"
    actions:
      label:
        add: ["needs-review", "major"]
      comment:
        message: "âš ï¸ ë©”ì´ì € ë²„ì „ ì—…ë°ì´íŠ¸ì…ë‹ˆë‹¤. ì§ì ‘ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."

  # 6. ì˜¤ë˜ëœ PR ìë™ ì •ë¦¬ (30ì¼ ì´ìƒ)
  - name: "[ì •ë¦¬] 30ì¼ ì´ìƒëœ PR â†’ stale ë¼ë²¨"
    conditions:
      - updated-at<30 days ago
      - -label=stale
      - -closed
    actions:
      label:
        add: ["stale"]
      comment:
        message: "ğŸ“… ì´ PRì´ 30ì¼ ì´ìƒ ì—…ë°ì´íŠ¸ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì§„í–‰ ì—¬ë¶€ í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤."
