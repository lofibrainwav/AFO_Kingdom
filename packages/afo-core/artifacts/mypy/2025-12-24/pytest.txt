============================= test session starts ==============================
platform darwin -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0
rootdir: /Users/brnestrm/AFO_Kingdom/packages/afo-core
configfile: pyproject.toml
testpaths: tests, tests/health, tests/llm, tests/api
plugins: anyio-4.11.0, web3-6.15.0, hypothesis-6.148.7, asyncio-1.3.0, langsmith-0.4.42, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 316 items

tests/api/test_api_chat.py ...........                                   [  3%]
tests/api/test_api_health.py .........                                   [  6%]
tests/api/test_api_pillars.py .........                                  [  9%]
tests/api/test_api_skills.py ....                                        [ 10%]
tests/api/test_api_system_health.py ...                                  [ 11%]
tests/api/test_api_wallet_routes.py ....                                 [ 12%]
tests/api/test_wallet_routers_comprehensive.py ...............           [ 17%]
tests/llm/test_llm_apis.py ...............                               [ 22%]
tests/llm/test_llm_implementations.py ............                       [ 25%]
tests/llm/test_llm_router.py ............                                [ 29%]
tests/test_api_health.py .FF                                             [ 30%]
tests/test_api_server.py ....F...                                        [ 33%]
tests/test_api_server_lifespan.py .                                      [ 33%]
tests/test_api_wallet.py ................                                [ 38%]
tests/test_api_wallet_advanced.py .....                                  [ 40%]
tests/test_api_wallet_cli.py ......                                      [ 42%]
tests/test_api_wallet_db_mock.py .......                                 [ 44%]
tests/test_api_wallet_imports.py ..                                      [ 44%]
tests/test_api_wallet_vault_fallback.py ...                              [ 45%]
tests/test_audit_persistence.py .                                        [ 46%]
tests/test_circuit_breaker.py ....                                       [ 47%]
tests/test_crag.py ..........                                            [ 50%]
tests/test_goodness_serenity.py ..........                               [ 53%]
tests/test_hybrid_rag_advanced.py ............                           [ 57%]
tests/test_input_server.py ............                                  [ 61%]
tests/test_input_server_advanced.py ..                                   [ 62%]
tests/test_integration_api_endpoints.py .....                            [ 63%]
tests/test_integration_services.py ..ss..                                [ 65%]
tests/test_kms_advanced.py .........                                     [ 68%]
tests/test_llm_router_advanced.py .....F....                             [ 71%]
tests/test_mcp_client_debug.py ..                                        [ 72%]
tests/test_mcp_integration.py ..                                         [ 72%]
tests/test_persona_service_integration.py ..                             [ 73%]
tests/test_rate_limit.py ...                                             [ 74%]
tests/test_redis_optimized.py .....                                      [ 75%]
tests/test_scholars.py ......