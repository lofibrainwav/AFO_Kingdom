# pytest.ini
# AFO Soul Engine pytest 설정

[pytest]
# 테스트 마커 정의
markers =
    smoke: 빠른 smoke 테스트 (매 커밋마다 실행)
    slow: 느린 테스트 (배포 전에만 실행)
    integration: 통합 테스트 (Redis, DB, API 모두 필요)
    api: API 서버 테스트
    unit: 단위 테스트
    bdd: BDD (Behavior-Driven Development) 테스트
    browser_auth: 브라우저 인증 모듈 테스트
    skip_external: 외부 서비스 의존 테스트 스킵
    external: 외부 API 호출 테스트
    asyncio: Tests that use asyncio
    module_reload: Tests that reload modules (run in isolation)

# pytest-bdd 설정
bdd_features_base_dir = features/

# 테스트 출력 설정
# web3 플러그인 비활성화 (eth_typing 호환성 문제)
addopts =
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    -p no:warnings
    -p no:web3

# 테스트 검색 경로
testpaths =
    tests
    tests/health
    tests/llm
    tests/api

# Python 경로 설정
pythonpath = .

# pytest-asyncio 설정
asyncio_mode = auto
python_files = test_*.py
python_classes = Test*
python_functions = test_*
norecursedirs = legacy scripts .venv venv env node_modules
