============================= test session starts ==============================
platform darwin -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0
rootdir: /Users/brnestrm/AFO_Kingdom/packages/afo-core
configfile: pyproject.toml
testpaths: tests, tests/health, tests/llm, tests/api
plugins: anyio-4.11.0, web3-6.15.0, hypothesis-6.148.7, asyncio-1.3.0, langsmith-0.4.42, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 313 items / 4 deselected / 1 skipped / 309 selected

tests/api/test_api_chat.py ...........                                   [  3%]
tests/api/test_api_health.py .........                                   [  6%]
tests/api/test_api_pillars.py .........                                  [  9%]
tests/api/test_api_skills.py ....                                        [ 10%]
tests/api/test_api_system_health.py ...                                  [ 11%]
tests/api/test_api_wallet_routes.py ....                                 [ 12%]
tests/health/test_fingerprint_contract.py ....                           [ 14%]
tests/llm/test_llm_apis.py ...............                               [ 19%]
tests/llm/test_llm_implementations.py ............                       [ 22%]
tests/llm/test_llm_router.py ............                                [ 26%]
tests/test_api_health.py ...                                             [ 27%]
tests/test_api_server.py ........                                        [ 30%]
tests/test_api_server_lifespan.py .                                      [ 30%]
tests/test_api_wallet.py ................                                [ 35%]
tests/test_api_wallet_advanced.py .....                                  [ 37%]
tests/test_api_wallet_cli.py ......                                      [ 39%]
tests/test_api_wallet_db_mock.py .......                                 [ 41%]
tests/test_api_wallet_imports.py ..                                      [ 42%]
tests/test_api_wallet_vault_fallback.py sss                              [ 43%]
tests/test_circuit_breaker.py ....                                       [ 44%]
tests/test_crag.py ..........                                            [ 47%]
tests/test_goodness_serenity.py ..........                               [ 51%]
tests/test_hybrid_rag_advanced.py ............                           [ 55%]
tests/test_input_server.py ............                                  [ 58%]
tests/test_input_server_advanced.py ..                                   [ 59%]
tests/test_integration_api_endpoints.py .....                            [ 61%]
tests/test_integration_services.py ....                                  [ 62%]
tests/test_kms_advanced.py .........                                     [ 65%]
tests/test_llm_router_advanced.py .........                              [ 68%]
tests/test_mcp_client_debug.py ..                                        [ 68%]
tests/test_mcp_integration.py ..                                         [ 69%]
tests/test_persona_service_integration.py ..                             [ 70%]
tests/test_rate_limit.py ...                                             [ 71%]
tests/test_redis_optimized.py .....                                      [ 72%]
tests/test_services.py ................                                  [ 77%]
tests/test_settings.py ....                                              [ 79%]
tests/test_skills_registry.py ........                                   [ 81%]
tests/test_structured_concurrency.py ...............                     [ 86%]
tests/test_trinity_engine.py ...                                         [ 87%]
tests/test_utils.py ..........................                           [ 96%]
tests/test_utils_advanced.py ............                                [100%]

================= 306 passed, 4 skipped, 4 deselected in 4.75s =================
