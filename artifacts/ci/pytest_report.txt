============================= test session starts ==============================
platform darwin -- Python 3.12.12, pytest-7.4.3, pluggy-1.6.0
rootdir: /Users/brnestrm/AFO_Kingdom/packages/afo-core
configfile: pyproject.toml
testpaths: tests, tests/health, tests/llm, tests/api
plugins: asyncio-0.23.8, anyio-4.12.0, langsmith-0.6.0
asyncio: mode=Mode.AUTO
collected 333 items / 4 deselected / 1 skipped / 329 selected

tests/test_api_health.py ...                                             [  0%]
tests/test_api_server.py ........                                        [  3%]
tests/test_api_server_lifespan.py .                                      [  3%]
tests/test_api_wallet.py ................                                [  8%]
tests/test_api_wallet_advanced.py .....                                  [ 10%]
tests/test_api_wallet_cli.py ......                                      [ 11%]
tests/test_api_wallet_db_mock.py .......                                 [ 13%]
tests/test_api_wallet_imports.py ..                                      [ 14%]
tests/test_api_wallet_vault_fallback.py sss                              [ 15%]
tests/test_circuit_breaker.py ....                                       [ 16%]
tests/test_crag.py ..........                                            [ 19%]
tests/test_goodness_serenity.py ..........                               [ 22%]
tests/test_hybrid_rag_advanced.py ............                           [ 26%]
tests/test_input_server.py ............                                  [ 30%]
tests/test_input_server_advanced.py ..                                   [ 30%]
tests/test_integration_api_endpoints.py .....                            [ 32%]
tests/test_integration_services.py ....                                  [ 33%]
tests/test_kms_advanced.py .........                                     [ 36%]
tests/test_llm_router_advanced.py .........                              [ 38%]
tests/test_mcp_client_debug.py ..                                        [ 39%]
tests/test_mcp_integration.py ..                                         [ 40%]
tests/test_mipro_bayesian.py ....                                        [ 41%]
tests/test_persona_service_integration.py ..                             [ 41%]
tests/test_rag_rollout_priority.py ......                                [ 43%]
tests/test_rag_streaming.py ..                                           [ 44%]
tests/test_rate_limit.py ...                                             [ 45%]
tests/test_redis_optimized.py .....                                      [ 46%]
tests/test_services.py ................                                  [ 51%]
tests/test_settings.py ....                                              [ 52%]
tests/test_skills_registry.py ........                                   [ 55%]
tests/test_structured_concurrency.py ........                            [ 57%]
tests/test_tax_engine_2025.py .........                                  [ 60%]
tests/test_trinity_engine.py ...                                         [ 61%]
tests/test_trinity_unified.py ...                                        [ 62%]
tests/test_utils.py ..........................                           [ 70%]
tests/test_utils_advanced.py ............                                [ 73%]
tests/api/test_api_chat.py ...........                                   [ 77%]
tests/api/test_api_health.py .........                                   [ 79%]
tests/api/test_api_pillars.py .........                                  [ 82%]
tests/api/test_api_skills.py ....                                        [ 83%]
tests/api/test_api_system_health.py ...                                  [ 84%]
tests/api/test_api_wallet_routes.py ....                                 [ 86%]
tests/filial_gate/test_filial_gate.py ...                                [ 86%]
tests/health/test_fingerprint_contract.py ....                           [ 88%]
tests/llm/test_llm_apis.py ...............                               [ 92%]
tests/llm/test_llm_implementations.py ............                       [ 96%]
tests/llm/test_llm_router.py ............                                [100%]

=========== 326 passed, 4 skipped, 4 deselected in 104.97s (0:01:44) ===========
