============================= test session starts ==============================
platform darwin -- Python 3.12.12, pytest-7.4.3, pluggy-1.6.0
rootdir: /Users/brnestrm/AFO_Kingdom/packages/afo-core
configfile: pyproject.toml
testpaths: tests, tests/health, tests/llm, tests/api
plugins: asyncio-0.23.8, anyio-4.12.0, xdist-3.8.0, langsmith-0.6.0
asyncio: mode=Mode.AUTO
created: 14/14 workers
14 workers [324 items]

.........................ssss........................................... [ 21%]
........................................................................ [ 44%]
......................................................................... [ 66%]
........................................................................ [ 89%]
...................................                                      [100%]‚úÖ 5Í∏∞Îë• API Router loaded successfully
   - GET /api/5pillars/current (ÌòÑÏû¨ 5Í∏∞Îë• Ï†êÏàò Ï°∞Ìöå)
   - POST /api/5pillars/live (LangFlow Ïã§ÏãúÍ∞Ñ ÌèâÍ∞Ä - Phase 23-D)
   - GET /api/5pillars/family/hub (Í∞ÄÏ°± ÌóàÎ∏å Ï†ÑÏ≤¥ ÏÉÅÌÉú - Phase 23-E)
   - POST /api/5pillars/family/hub/member/update (Í∞ÄÏ°± Íµ¨ÏÑ±Ïõê Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏)
   - GET /api/5pillars/family/hub/data (Ïã§ÏãúÍ∞Ñ Í∞ÄÏ°± ÌóàÎ∏å Îç∞Ïù¥ÌÑ∞)
[TRINITY-OS] ÌéòÎ•¥ÏÜåÎÇò Ï†ÑÌôò ‚Üí Î∂àÍµ¥Ïùò ÏÇ¨Î†πÍ¥Ä (ÌôúÏÑ±Ìôî)
üî• [DEBUG] AFO.services.gen_ui is being loaded!
‚ö†Ô∏è Context7 trinity-os Í≤ΩÎ°ú ÏóÜÏùå: /Users/brnestrm/AFO_Kingdom/packages/afo-core/trinity-os
‚úÖ AFO ÏÑ§Ï†ï Î°úÎìú ÏôÑÎ£å: dev ÌôòÍ≤Ω (AFOSettings)
[ReportGenerator] python-docx not installed. Word generation disabled.
Safe import failed for AFO.api.routers.aicpa: No module named 'AFO.service'
Safe import failed for AFO.api.routers.thoughts: No module named 'sse_starlette'
Safe import failed for AFO.api.routers.got: No module named 'AFO.api.routers.got'
Safe import failed for AFO.api.routers.learning_log_router: No module named 'sqlmodel'
Safe import failed for AFO.api.routers.matrix: No module named 'sse_starlette'
Safe import failed for AFO.api.routers.modal_data: No module named 'AFO.api.routers.modal_data'
Safe import failed for AFO.api.routers.multi_agent: No module named 'AFO.api.routers.multi_agent'
Safe import failed for AFO.api.routers.n8n: No module named 'AFO.api.routers.n8n'
Safe import failed for AFO.api.routes.serenity_router: No module named 'playwright'
Safe import failed for AFO.api.routers.ssot: cannot import name 'TrinityInputs' from 'AFO.trinity' (/Users/brnestrm/AFO_Kingdom/packages/afo-core/AFO/trinity/__init__.py)
Safe import failed for AFO.api.routes.streams: No module named 'sse_starlette'
Safe import failed for api.routes.tax: No module named 'afo'
Safe import failed for AFO.api.routes.trinity_policy: No module named 'AFO.api.routes.trinity_policy'
Safe import failed for AFO.api.routes.trinity_sbt: No module named 'AFO.api.routes.trinity_sbt'
Safe import failed for AFO.api.routes.wallet: cannot import name 'API_PROVIDERS' from 'AFO.models' (unknown location)
Safe import failed for AFO.api.routers.evolution_router: No module named 'AFO.evolution.dgm_engine'
Safe import failed for AFO.api.routers.decree_router: No module named 'AFO.evolution.dgm_engine'
Safe import failed for AFO.api.routers.external_router: No module named 'AFO.evolution.dgm_engine'
Safe import failed for api.routes.julie: No module named 'afo'
2026-01-07 16:36:08,257 - AFO.api_server - WARNING - ‚ö†Ô∏è Sentry SDK not installed, skipping initialization
2026-01-07 16:36:08,318 - AFO.api_server - WARNING - ‚ö†Ô∏è OpenTelemetry setup failed: No module named 'opentelemetry.instrumentation.logging'
2026-01-07 16:36:08,319 - AFO.api.config - INFO - FastAPI application created successfully
2026-01-07 16:36:08,319 - AFO.api_server - INFO - FastAPI application created
2026-01-07 16:36:08,319 - AFO.api.routers.chancellor_router - WARNING - ‚ö†Ô∏è Learning profile loader import failed: No module named 'afo'
2026-01-07 16:36:08,319 - AFO.api.routers.chancellor_router - WARNING - ‚ö†Ô∏è RAG shadow mode import failed: No module named 'rag_shadow'
2026-01-07 16:36:08,319 - AFO.api.routers.chancellor_router - WARNING - ‚ö†Ô∏è RAG flag + gradual mode import failed: No module named 'rag_flag'
2026-01-07 16:36:08,323 - AFO.api.routers.chancellor_router - INFO - ‚úÖ Chancellor V2 runner loaded successfully
2026-01-07 16:36:08,326 - AFO.api_server - INFO - Chancellor Router registered successfully
2026-01-07 16:36:08,333 - AFO.api_server - INFO - Multimodal Router registered successfully
2026-01-07 16:36:08,333 - AFO.api_server - INFO - RAG Router registered successfully
2026-01-07 16:36:08,333 - AFO.api_server - WARNING - Auth Router registration failed: No module named 'AFO.api.routes.auth'
2026-01-07 16:36:08,333 - AFO.api_server - INFO - Rate limiter configured
2026-01-07 16:36:08,334 - AFO.api_server - WARNING - ‚ö†Ô∏è APIKeyAuthMiddleware not available
2026-01-07 16:36:08,334 - AFO.api_server - WARNING - ‚ö†Ô∏è API Key ACL not available
2026-01-07 16:36:08,335 - AFO.api_server - INFO - Application configured with security measures
2026-01-07 16:36:08,335 - AFO.setup - INFO - CORS middleware configured
2026-01-07 16:36:08,335 - AFO.setup - INFO - Middleware setup complete
2026-01-07 16:36:08,335 - AFO.api_server - INFO - Middleware setup completed
2026-01-07 16:36:08,335 - AFO.api.router_manager - INFO - AFO Router Manager initialized with beautiful code principles
2026-01-07 16:36:08,335 - AFO.api.router_manager - INFO - Starting router registration process...
2026-01-07 16:36:08,346 - AFO.julie_cpa.grok_engine - INFO - Redis cache client initialized
2026-01-07 16:36:08,346 - AFO.julie_cpa.grok_engine - INFO - Grok Engine initialized with beautiful code principles
2026-01-07 16:36:08,353 - AFO.api.router_manager - WARNING - Time Travel Router not available
2026-01-07 16:36:08,353 - AFO.api.router_manager - WARNING - RAG Stream Router not available
2026-01-07 16:36:08,357 - AFO.api.router_manager - INFO - Skills API registered successfully (6 routes)
2026-01-07 16:36:08,364 - AFO.api.router_manager - WARNING - Intake API router not available
2026-01-07 16:36:08,367 - AFO.api.router_manager - ERROR - GenUI Engine not available: No module named 'playwright'
Traceback (most recent call last):
  File "/Users/brnestrm/AFO_Kingdom/packages/afo-core/AFO/api/router_manager.py", line 347, in _register_compatibility_routers
    from AFO.api.routers.gen_ui import router as gen_ui_router
  File "/Users/brnestrm/AFO_Kingdom/packages/afo-core/AFO/api/routers/gen_ui.py", line 15, in <module>
    from AFO.services.vision_verifier import vision_verifier
  File "/Users/brnestrm/AFO_Kingdom/packages/afo-core/AFO/services/vision_verifier.py", line 13, in <module>
    from AFO.utils.playwright_bridge import bridge
  File "/Users/brnestrm/AFO_Kingdom/packages/afo-core/AFO/utils/playwright_bridge.py", line 9, in <module>
    from playwright.async_api import Browser, Playwright, Route, async_playwright
ModuleNotFoundError: No module named 'playwright'
2026-01-07 16:36:08,373 - AFO.api.router_manager - WARNING - Cache Metrics router not available
2026-01-07 16:36:08,375 - AFO.api.router_manager - INFO - Router registration completed. Total: 106 routers
2026-01-07 16:36:08,375 - AFO.api_server - INFO - Router setup completed
2026-01-07 16:36:08,391 - AFO.api_server - INFO - OpenTelemetry FastAPI instrumentation applied
2026-01-07 16:36:08,391 - AFO.api_server - INFO - AFO Kingdom API Server initialized with beautiful code principles

======================== 320 passed, 5 skipped in 4.85s ========================
